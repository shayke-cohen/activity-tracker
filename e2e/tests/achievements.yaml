# Achievements Tab E2E Test
# Tests the achievements and badges functionality

name: Achievements Tab
description: Test viewing achievements, badges, and streaks
platform: ios
app: com.activitytracker.ActivityTracker

config:
  autoAcceptAlerts: true
  timeout: 30000

steps:
  # Navigate to achievements
  - name: Launch and go to Awards tab
    inspect:
      label: home-screen
    act:
      action: tap
      text: "Awards"
    wait:
      for: element
      text: "Achievements"

  # Verify streak section
  - name: Verify streak card visible
    assert:
      type: visible
      text: "CURRENT STREAK"

  - name: Verify streak count shown
    assert:
      type: visible
      text: "Day"

  # Verify badges section
  - name: Verify badges overview
    assert:
      type: visible
      text: "BADGES"

  - name: Verify progress indicator
    assert:
      type: visible
      text: "unlocked"

  # View all badges
  - name: Tap View All badges
    act:
      action: tap
      text: "View All"
    wait:
      for: element
      text: "All Badges"

  - name: Verify badge grid visible
    assert:
      type: visible
      text: "All"

  # Filter badges
  - name: Filter by Milestones
    act:
      action: tap
      text: "Milestones"
    wait:
      for: duration
      duration: 500

  - name: Verify filter applied
    assert:
      type: visible
      text: "First Steps"

  # View badge detail
  - name: Tap on first badge
    act:
      action: tap
      text: "First Steps"
    wait:
      for: element
      text: "Badge Details"

  - name: Verify badge detail view
    assert:
      type: visible
      text: "Complete your first workout"

  # Save baseline
  - name: Save badge detail baseline
    inspect:
      saveBaseline: "badge-detail"

  # Dismiss and return
  - name: Dismiss badge detail
    act:
      action: tap
      text: "Done"
    wait:
      for: element
      text: "All Badges"

  - name: Return to achievements
    act:
      action: swipe
      direction: right
    wait:
      for: element
      text: "CURRENT STREAK"
